@use '../../../App.scss' as rs;

.VideoPlayer {
  .playerMain {
    width: 100%;
    height: 100vh;
    aspect-ratio: 1920/1080;
    position: relative;

    &::after {
      content: '';
      width: 100%;
      height: 100vh;
      position: absolute;
      top: 0;
      left: 0;
      background: url('/images/main/skeleton.svg') 50% / cover no-repeat;
      z-index: -1;
    }

    &::before {
      content: '';
      width: 100%;
      height: 100vh;
      position: absolute;
      top: 0;
      left: 0;
      background: linear-gradient(
        180deg,
        rgba(2, 23, 42, 0) 30%,
        rgba(2, 23, 42, 0.6) 80%,
        #02172a 100%
      );
    }

    img {
      width: 100%;
      height: inherit;
      vertical-align: middle;
      object-fit: cover;
    }

    .info-wrap {
      display: flex;
      flex-direction: column;
      margin-left: 4%;
      width: 35%;
      aspect-ratio: 660/360;
      // transform: translateY(-50%);
      position: absolute;
      bottom: 24%;

      .skeleton {
        aspect-ratio: 660/360;
      }

      .logo {
        margin-bottom: 40px;
        max-width: inherit;
        // border: 1px solid yellow;

        img {
          width: auto;
          height: 100%;
          max-height: 160px;
          object-fit: contain;
        }
      }

      .logo-text {
        @include rs.font(6rem, 500, #fff);
      }
      .info-flex {
        display: flex;
        flex-wrap: wrap;
      }

      .innerFlex {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
      }
      .info1 {
        margin-right: 2rem;
      }
      .info2,
      .info3,
      .info4 {
        color: #fff;
        @include rs.font(1.6rem, 600, #fff);
        line-height: 150%;

        span {
          &::after {
            content: '·';
            padding: 0 8px;
          }
          &:last-child {
            &::after {
              content: '';
              padding: 0;
            }
          }
        }

        &::before {
          content: '·';
          padding: 0 8px;
        }

        &:empty {
          display: none;
        }
      }

      .info3 {
        &:empty {
          display: none;
        }
      }

      .info2 {
        &::before {
          content: '';
          padding: 0;
        }
      }

      .tagline {
        @include rs.font(1.8rem, 400, #fff);
        display: block;
        width: 100%;
      }

      .age {
        @include rs.age();
      }

      .infoTitle {
        margin-top: 20px;
        @include rs.font(1.8rem, 400, #fff);
        line-height: 150%;
      }
    }

    .progressBar {
      width: 70%;
      height: 8px;
      border-radius: 4px;
      background: rgba(255, 255, 255, 0.3);
      overflow: hidden;
      margin-bottom: 4rem;
      position: relative;

      .now {
        background: #33ddff;
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        display: block;
      }
    }

    .buttonWrap {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-top: 20px;

      .play {
        display: flex;
        width: 168px;
        padding: 12px 16px;

        justify-content: center;
        align-items: center;
        gap: 10px;
        border-radius: 8px;
        background: #fff;
        box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.15);
        @include rs.font(2rem, 500, #333);
        letter-spacing: -0.5px;

        &::after {
          content: '';
          width: 20px;
          aspect-ratio: 1/1;
          display: inline-block;
          background: url('../../../../public/icon/nowPlay.svg');
          background-repeat: no-repeat;
          background-position: center;
        }
        &:hover {
          background: #f4f4f4;
        }
      }

      .MyWish {
        width: 54px;
        aspect-ratio: 1/1;
        display: flex;
        padding: 5px;
        justify-content: center;
        align-items: center;
        gap: 10px;
        border-radius: 27px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background-color: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(12px);
        background-image: url('../../../../public/icon/heart.svg');
        background-repeat: no-repeat;
        background-position: center;

        &.active {
          background-image: url('../../../../public/icon/heartFillIcon.svg');
          background-repeat: no-repeat;
          background-color: rgba(255, 255, 255, 0.2);
          background-position: center;
        }
      }
    }
  }

  .relatedInfo {
    margin-top: -80px;
    position: relative;

    .buttonWrap {
      display: flex;
      padding: 0 4%;
      justify-content: start;
      align-items: center;
      position: relative;

      &::before {
        position: absolute;
      }

      button {
        width: 20%;
        @include rs.font(1.8rem, 500, #fff);
        line-height: 120%; /* 28.8px */
        letter-spacing: -0.2px;
        padding: 20px 30px;
        text-wrap: no-wrap;
        text-align: center;
        border-bottom: 4px solid transparent;
        &.active {
          border-bottom: 4px solid #fff;
        }
      }
    }
    .tab-content {
      background-color: #02172a;
    }

    //TODO 작품 정보

    .tab {
      padding: 80px 4%;

      h3 {
        @include rs.font(3rem, 500, #fff);
      }

      .grid {
        margin-top: 20px;
        display: grid;
        gap: 10px;

        &.col {
          grid-template-columns: repeat(5, minmax(100px, 20%));
          .grid-item {
            aspect-ratio: 300/440;
          }
        }

        &.row {
          grid-template-columns: repeat(3, minmax(100px, 550px));
          .grid-item {
            aspect-ratio: 550/ 300;
          }
        }

        .grid-item {
          width: 100%;
          height: auto;
          border-radius: 16px;
          box-shadow: 0 10px 32px -4px rgba(0, 0, 0, 0.2);
          overflow: hidden;
          filter: grayscale(0.5);

          img {
            width: 100%;
            height: 100%;
            vertical-align: middle;
            object-fit: cover;
            transition: ease 0.3s;
          }

          .iframe-box {
            width: 100%;
            height: 100%;
          }

          &:hover {
            filter: grayscale(0);
            img {
              transform: scale(1.1);
            }
          }
        }
      }
    }

    /* VideoPlayerPage.scss 내부에 추가 또는 에피소드 관련 섹션에 삽입 */
    .episodes.tab {
      padding: 4rem 4%; // 좌우 여백을 다른 섹션과 통일

      // 시즌 선택 드롭다운
      .seasonSelector {
        margin-bottom: 40px;
        display: flex;
        align-items: center;
        gap: 15px;

        label {
          @include rs.font(1.8rem, 500, #fff);
        }

        select {
          background-color: rgba(255, 255, 255, 0.1);
          color: #f9f9f9;
          border: 1px solid rgba(255, 255, 255, 0.2);
          padding: 12px 24px;
          font-size: 1.6rem;
          border-radius: 8px;
          outline: none;
          cursor: pointer;
          backdrop-filter: blur(10px);
          transition: all 0.3s ease;

          &:hover {
            background-color: rgba(255, 255, 255, 0.2);
            border-color: #fff;
          }

          option {
            background-color: #02172a; // 배경색과 통일
            color: #f9f9f9;
          }
        }
      }

      // 에피소드 리스트: Grid 레이아웃으로 변경
      .episodeList {
        display: grid;
        grid-template-columns: repeat(4, minmax(320px, 1fr)); // 반응형 그리드
        gap: 30px;

        .episodeItem {
          display: flex;
          flex-direction: column; // 세로 카드 형태
          gap: 16px;
          padding: 0; // 패딩 제거하고 이미지와 텍스트 배치
          border-radius: 12px;
          overflow: hidden;
          transition: transform 0.3s ease;
          cursor: pointer;

          &:hover {
            transform: translateY(-8px); // 살짝 위로 올라오는 효과

            .episodeThumbnail {
              &::after {
                opacity: 1; // 호버 시 재생 아이콘 표시용
              }
              img {
                transform: scale(1.05);
                filter: brightness(0.8);
              }
            }

            .episodeInfo h3 {
              color: #33ddff; // 호버 시 제목 강조
            }
          }

          // 에피소드 썸네일 영역
          .episodeThumbnail {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 9; // 표준 영상 비율
            overflow: hidden;
            border-radius: 12px;
            background-color: #1a1d29;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);

            img {
              width: 100%;
              height: 100%;
              object-fit: cover;
              transition: transform 0.4s ease, filter 0.3s ease;
            }

            // 재생 아이콘 (선택 사항: 가상 요소로 구현)
            &::after {
              content: '▶';
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              font-size: 3rem;
              color: #fff;
              opacity: 0;
              transition: opacity 0.3s ease;
              z-index: 2;
            }

            .episodeNumber {
              position: absolute;
              top: 12px;
              left: 12px;
              background-color: rgba(0, 0, 0, 0.75);
              color: #fff;
              padding: 4px 10px;
              border-radius: 4px;
              font-size: 1.4rem;
              font-weight: 700;
              backdrop-filter: blur(4px);
              z-index: 1;
            }
          }

          // 에피소드 텍스트 정보 영역
          .episodeInfo {
            padding: 0 5px;

            .header-row {
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-bottom: 8px;
            }

            h3 {
              @include rs.font(1.8rem, 600, #f9f9f9);
              margin-bottom: 6px;
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
            }

            .episode-meta {
              @include rs.font(1.4rem, 400, #a0a0a0);
              margin-bottom: 10px;
            }

            .episode-overview {
              @include rs.font(1.5rem, 400, #cacaca);
              line-height: 1.6;
              display: -webkit-box;
              -webkit-line-clamp: 2; // 가로 카드이므로 2줄로 제한
              -webkit-box-orient: vertical;
              overflow: hidden;
              text-overflow: ellipsis;
            }
          }
        }
      }
    }

    // 스켈레톤 애니메이션 유지
    @keyframes skeleton-loading {
      0% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    // 작품정보
    .detailData {
      display: flex;
      flex-direction: column;
      gap: 80px;
      .title {
        @include rs.font(2.4rem, 500, #fff);
        margin-bottom: 20px;
      }

      li {
        @include rs.font(1.8rem, 400, #ddd);
        line-height: -0.45%;
        word-break: keep-all;

        .production,
        .networks {
          margin-right: 8px;
        }
      }
    }

    // 컬렉션
    .collection {
      .info {
        margin-top: 20px;
        @include rs.font(1.6rem, 400, #fff);
      }

      .grid-item {
        img {
          max-width: 100%;
          object-fit: cover;
        }
      }
    }

    .trailers {
      iframe {
        width: 100%;
        height: 100%;
        border: none;
      }
    }

    .skeleton {
      pointer-events: none;
      .skeleton-image,
      .skeleton-video,
      .skeleton-text {
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0.05) 25%,
          rgba(255, 255, 255, 0.1) 50%,
          rgba(255, 255, 255, 0.05) 75%
        );
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s ease-in-out infinite;
        border-radius: 4px;
      }

      .skeleton-image {
        width: 100%;
        aspect-ratio: 2/3;
        margin-bottom: 8px;
      }

      .skeleton-video {
        width: 100%;
        aspect-ratio: 16/9;
        margin-bottom: 8px;
      }

      .skeleton-text {
        height: 20px;
        width: 80%;
        margin: 0 auto;
      }
    }
  }
}
